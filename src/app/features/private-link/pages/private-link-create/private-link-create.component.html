<div class="container">
  <form [formGroup]="createLinkForm" (ngSubmit)="onSubmit()">
    <div class="form-group mb-3">
      <label for="email">Email de l’entreprise</label>
      <input id="email" class="form-control" formControlName="email" type="email" required>
    </div>

    <div class="form-group mb-3">
      <label for="stageId">Stage</label>
      <select id="stageId" class="form-control" formControlName="stageId" required>
        <option value="">-- Sélectionner un stage --</option>
        <option *ngFor="let stage of stages" [value]="stage.id">
          'Stage:' + {{ stage.city}} - {{stage.street}} {{stage.dateDebut }} {{stage.dateFin}}
        </option>
      </select>
    </div>

    <button type="submit" class="btn btn-primary" [disabled]="createLinkForm.invalid">Créer le lien</button>
  </form>

 <div *ngIf="message" [ngClass]="{
  'alert alert-info': messageType === 'success',
  'alert alert-danger': messageType === 'error'
}" class="mt-3">
    <div [innerHTML]="message"></div>

    <div *ngIf="linkUrl" class="mt-2 d-flex align-items-center gap-2">
      <span class="text-break">{{ linkUrl }}</span>
      <button class="btn btn-sm btn-outline-primary" (click)="copyToClipboard(linkUrl)">Copier</button>
      <span *ngIf="copied" class="text-success">✔</span>
    </div>
  </div>

</div>

<div
  class="toast-container position-fixed bottom-0 end-0 p-3"
  style="z-index: 1055"
  aria-live="polite"
  aria-atomic="true"
>
  <div
    class="toast align-items-center text-white border-0"
    [ngClass]="{
      'bg-success': toastType === 'success',
      'bg-danger': toastType === 'error'
    }"
    role="alert"
    *ngIf="toastVisible"
  >
    <div class="d-flex">
      <div class="toast-body" [innerHTML]="toastMessage"></div>
      <button
        type="button"
        class="btn-close btn-close-white me-2 m-auto"
        data-bs-dismiss="toast"
        aria-label="Close"
        (click)="hideToast()"
      ></button>
    </div>
  </div>
</div>

