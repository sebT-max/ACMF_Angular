
<div routerLink="/" id="logo_stage_all">
  <img src="/LOGO%20BLEU.png" alt="logo_acf" width="208" height="160">
</div>

<h1>Choisissez votre stage</h1>
<div id="stage_filters">
  <p>Filtre de recherche</p>
  <input type="text" [(ngModel)]="searchTerm" (input)="onSearch()" id="city_filter" placeholder="Rechercher par ville">
  <input type="date" [(ngModel)]="selectedDate" (change)="onDateFilter()" placeholder="Filtrer par date" />
</div>


<div class="card-container">
  @for (stage of stages; track stage.id) {
    <div class="cards_stages_and_details">
    <div class="card_stages">

      <div class="card_stages_date">
        {{ stage?.dateDebut | date:'d':'fr' }} & {{ stage?.dateFin | date:'d MMMM':'fr' }}
      </div>
      <div class="card_stages_remaining_places_and_distance">
        <h3>Places restantes:
          <strong>{{ stage?.capacity === 0 ? "Complet" : stage?.capacity }}</strong>
        </h3>
        <h3> Distance: {{ stage.distance | number:'1.1-1' }} km
        </h3>
      </div>


      <div class="card_stages_all_datas">
        <h2> STAGE {{ stage.city }}</h2>
        <hr>
        <p>{{ stage!.street }}</p>
      </div>
      <div id="stage_price">
        <h4>{{ stage.price }}€
        </h4>
      </div>

<div style="display:flex;">
  <!-- Bouton "Je m'inscris" -->
  <button class="inscription_button" [routerLink]="['/inscriptions/create',stage.id]" >Je m'inscris</button>
  <!-- Bouton Détails pour afficher les informations -->
  <button class="details_button" (click)="selectStage(stage)">
    {{ selectedStage?.id === stage.id ? 'Fermer' : 'Détails' }}
  </button>
</div>
</div>

    <!-- Affichage des détails en dehors de la carte, sous la carte sélectionnée -->
    <div *ngIf="selectedStage?.id === stage.id">
      <app-stage-details [stage]="selectedStage" (close)="closeDetails()"></app-stage-details>
    </div>
    </div>
  }
</div>

